# Chapter 9 중첩 선언과 익명 객체

### 9.1 중첩 클래스

- 중첩 클래스(Nested Class): 클래스 내부에 선언한 클래스
    - 중첩 클래스를 사용하면 클래스의 멤버를 쉽게 사용할 수 있다.
    - 외부에는 중첩 관계 클래스를 감추어 코드 복잡성을 줄일 수 있다.
- 중첩 클래스 분류
    - 클래스 멤버로 선언되는 중첩 클래스를 **멤버 클래스**
        - 인스턴스 멤버 클래스: A(바깥) 객체 생성해야 B 객체 생성(내부) 가능
        - 정적 (static) 멤버 클래스 : A(바깥) 객체를 생성하지 않아도 B 객체(내부) 생성 가능
    - 메소드 내부에서 선언되는 중첩 클래스를 **로컬 클래스**
        - method가 실행할 때만 B(메소드 내부) 객체 생성가능
- 중첩 클래스도 하나의 클래스로 컴파일하면 바이트코드 파일이 별도로 생성됨
    - 멤버 클래스 `A $ B .class`
    - 로컬 클래스 `A $1 B .class`

### 9.2 인스턴스 멤버 클래스

- 클래스의 멤버로 선언된 클래스

```text
[public] class A {
    [public | private] class B {
        
    }
}
```

- 접근 제한 범위
    - public: 다른 패키지에서 사용 가능
    - default: 같은 패키지에서만 사용 가능
    - private: A 내부에서만 사용 가능 가능
- 인스턴스 멤버 클래스는 주로 클래스 내부에서 사용되므로 private 접근 제한이 일반적이다.
- Java 17 부터 인스턴스 멤버 클래스 내에 정적 필드, 메소드 선언 가능

### 9.3 정적 멤버 클래스

- 정적 멤버 클래스는 static 키워드로 선언된 멤버 클래스

```text
[public] class A {
    [public | private] static class B {
    }
}
```

- 접근 제한 범위
    - public static: 다른 패키지에서 사용 가능
    - static default: 같은 패키지 내에서 사용 가능
    - private static: A 클래스 내부에서만 사용 가능
- 정적 멤버 클래스는 외부에서 A와 함께 사용하는 경우가 많아 default 또는 public 접근 제한을 가진다.

### 9.4 로컬 클래스

- 생성자 또는 메소드 내부에서 선언된 클래스를 **로컬 클래스**라고 한다.

```text
[public] class A {
    public A() {
        class B { }
    }
    
    public void method() {
        class B { }
    }
}
```

- 로컬 클래스는 생성자와 메소드가 실행될 동안에만 객체를 생성할 수 있다.
- 로컬 변수를 로컬 클래스에서 사용할 경우 클래스 변수는 final 특성을 갖는다.
- Java 8 이후부터는 명시적으로 final을 붙이지 않아도 된다.

### 9.5 바깥 멤버 접근

- **바깥 클래스의 멤버 접근 제한**
    - 인스턴스 멤버 클래스: 바깥 클래스의 모든 필드와 메소드
    - 정적 멤버 클래스: 바깥 클래스의 정적 필드와 정적 메소드
    - 정적 멤버 클래스는 바깥 객체가 없어도 사용 가능해야 하므로 바깥 클래스의 인스턴스 필드와 메소드는 사용하지 못한다.
- **바깥 클래스의 객체 접근**
    - `바깥클래스이름.this -> 바깥 객체`

### 9.6 중첩 인터페이스

- 클래스의 멤버로 선언된 인터페이스
- 해당 클래스와 긴밀한 관계를 맺는 구현 객체를 만들기 위해 사용

```text
class A {
    [public | private] [static] interface B {
        // 상수 필드
        // 추상 메소드
        // 디폴트 메소드
        // 정적 메소드 
    }
}
```

- 외부의 접근을 막지 않으려면 public
- A 내부에서만 사용하려면 private
- 같은 패키지 내에서만 접근 default
- A 객체 없이 B 사용하려면 static
- 중첩 인터페이스는 안드로이드와 같은 UI 프로그램에서 이벤트를 처리할 목적으로 많이 활용

### 9.7 익명 객체

- 익명(anonymous) 객체: 이름이 없는 객체
- 명시적으로 클래스를 선언하지 않기 때문에 쉽게 객체 생성 가능
- 익명 객체는 필드값, 로컬 변수값, 매개변수값으로 주로 사용
- 익명 객체는 클래스를 상속하거나 인터페이스를 구현해야만 생성 가능
- 클래스를 상속해서 만들면 익명 자식 객체
- 인터페이스를 구현해서 만들면 익명 구현 객체
- **익명 자식 객체**
    - `new 부모생성자(매개값, ...) { // ... }`
    - 중괄호 블록 안의 필드와 메소드는 익명 자식 객체가 가져야 할 멤버로 중괄호 블록 안에서만 사용 가능
- **익명 구현 객체**
    - 익명 구현 객체는 안드로이드와 같은 UI 프로그램에서 이벤트를 처리하는 객체로 많이 사용