# Chapter 5 참조 타입

### 데이터 타입 분류

- 자바의 데이터 타입 기본 타입(primitive type)과 참조 타입(reference type)
- 참조 타입은 객체의 번지(주소)를 참조하는 타입
- 배열, 열거, 클래스, 인터페이스
- 객체 (object) = 데이터 (필드) + 메소드
- 참조 타입으로 선언된 변수는 객체가 생성된 메모리 번지를 저장
- 변수는 Stack 메모리 영역에 생성, 객체의 값은 Heap 영역에 생성
    - 참조 타입 변수에 Heap 영역에 생성된 위치의 번지를 저장

### 메모리 사용 영역

- JVM 메모리 영역
    - 메소드 영역 (Method Area)
        - 클래스 별 상수, 정적필드, 메소드 코드 생성자 코드 등 저장
        - 바이트코드 파일의 내용이 저장되는 영역
    - 힙 영역 (Heap Area)
        - 객체가 생성되는 영역
        - 객체의 번지는 메소드 영역과 스택 영역의 상수와 변수에서 참조 가능
    - 스택 영역 (Stack)
        - 메소드를 호출할 때마다 생성되는 프레임이 저장되는 영역
        - 메소드 호출이 끝나면 프레임은 자동 제거
        - 프레임 내부에는 로컬 변수 스택이 존재

### 참조 타입 변수의 ==, != 연산

- 참조 타입의 == , != 연산은 변수가 참조하는 객체의 번지수가 동일한지 비교하는 것
- 같다면 동일한 객체, 다르다면 다른 객체를 참조한다.

### null과 NullPointerException

- 참조 타입 변수는 아직 번지를 저장하고 있지 않다는 뜻의 null(널) 값을 가질 수 있다.
- null로 초기화된 참조 변수는 스택에 생성
- 참조 변수를 사용하면서 가장 많이 발생하는 예외 -> NullPointerException
    - null 인 상태인 객체의 데이터, 메소드를 사용하려고 할 때 발생
    - [Null을 다루는 방법 - 향로](https://jojoldu.tistory.com/721)
        - Null Safe - 널을 회피하는 방법 x
        - Null 의 범위를 좁히는 방법 O
            - 사전 조건 체크 (Pre Condition)
            - Null 반환 금지
            - Null 함수 인자 전달 금지
            - 초기값과 실행값 구분
- 어떠한 변수도 객체를 참조하지 않으면 해당 객체를 프로그램에서 사용할 수 없는 객체가 됨.
- 참조할 수 없는 객체는 가비지 컬렉터(Garbage Collector)의 제거 대상

### 문자열(String) 타입

- 자바의 문자열은 String 객체로 생성
- 자바는 문자열 리터럴이 동일하다면 String 객체를 공유한다. String Pool
    - == 비교시 동일
- new 연산자로 생성시 새로운 객체로 생성 -> 다른 Heap 번지
- String의 값의 동일 비교를 하려면 equals() 메소드 사용
- String 에 "" (빈문자열) 대입 가능
- String method
    - 문자열의 특정 위치 문자 추출 - .charAt(index)
    - 문자열의 길이 - .length()
    - 문자열 대체 - .replace(target, replace) / replace() 는 새로운 문자열을 반환
    - 문자열 잘라내기 - .substring(beginIndex, endIndex)
    - 문자열 찾기 - .indexOf(str) 찾은 위치의 index 반환 없으면 -1
    - 문자열 포함되어 있는지 - .contains(str)
    - 문자열 분리 - .split(구분자)

### 배열(Array) 타입

- 연속된 공간에 값을 나열시키고, 값에 인덱스를 부여한 자료구조
    - 0부터 시작
    - 같은 타입만 관리 가능
    - 최초 생성한 길이 늘리거나 줄일 수 없음
- 선언 - 타입[] 변수; 타입 변수[];
    - null 초기화 가능
- 값목록으로 생성 가능(초기 선언시만) - int[] scores = { 90, 85, 80, 40, 50 };
- 타입 먼저 선언 시 - `int[] array; array = new int[]{1,2,3,4,5};`
- new 연산자 - `int[] array = new int[size];`
- 배열 길이 : 배열변수.length

### 다차원 배열

- 배열 항목에 또 다른 배열 대입 가능
- 다차원 배열 생성
    - 차원 별로 다른 크기의 배열 생성 가능

```
int[][] arr = {
        {1,2,3,4,5},
        {6,7,8},
        {9,10}
        };

int[][] arr2 = new int[3][];
arr2[0] = new int[10];
arr2[1] = new int[20];
arr2[2] = new int[30];
```

### 객체를 참조하는 배열

- 참조 타입 배열은 각 항목에 객체의 번지를 저장한다.
- 배열의 각 항목은 변수와 동일하게 참조 타입 변수로 취급

### 배열 복사

- for문 복사
- System.arraycopy(원본배열, 원본배열복사 시작인덱스, 새배열, 새배열 붙여넣기 시작인덱스, 복사 항목 수);

### 배열 항목 반복을 위한 향상된 for 문

- for(타입 변수 : 배열) { }

### main 메서드 String[] args 용도

- command or terminal program arguments 로 실행시 arg 전달

### 열거(Enum) 타입

- 요일 처럼 한정된 값을 갖는 타입 정의 할 때
- Week today = Week.SUNDAY;